// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Place {
  id          String   @id @default(cuid())
  placeId     String   @unique
  firstSeenAt DateTime @default(now())
  lastSeenAt  DateTime @default(now())
  isHidden    Boolean  @default(false)

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  cache       PlaceCache?
}

model PlaceCache {
  id        String   @id @default(cuid())
  placeId   String   @unique
  place     Place    @relation(fields: [placeId], references: [placeId], onDelete: Cascade)

  name      String
  address   String?
  area      String?
  lat       Float?
  lng       Float?
  types     String[]  @default([])
  fetchedAt DateTime  @default(now())

  rating          Float?
  userRatingCount Int?
  googleMapsUri   String?

  openingHours     Json?
  utcOffsetMinutes Int?
  openDays         Int[]    @default([])

  reviewSummary   String?

  @@index([fetchedAt])
  @@index([name])
  @@index([area])
}
